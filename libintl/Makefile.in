# Makefile for uClibc
#
# Copyright (C) 2000 by Lineo, inc.
# Copyright (C) 2000-2005 Erik Andersen <andersen@uclibc.org>
#
# Licensed under the LGPL v2.1, see the file COPYING.LIB in this tarball.
#

CFLAGS+=$(SSP_ALL_CFLAGS)

#DOMULTI=y

LIB_NAME:=libintl

MOBJ:=gettext.o ngettext.o  dgettext.o dcgettext.o dngettext.o dcngettext.o \
	textdomain.o bindtextdomain.o bind_textdomain_codeset.o \
	_nl_expand_alias.o _nl_msg_cat_cntr.o # glibc-isms

libintl_DIR:=$(top_srcdir)libintl
libintl_OUT:=$(top_builddir)libintl

libintl_MSRC:=$(libintl_DIR)/intl.c
libintl_MOBJ:=$(patsubst %.o,$(libintl_OUT)/%.o,$(MOBJ))

libintl_DEF:=$(patsubst %,-DL_%,$(subst .o,,$(notdir $(libintl_MOBJ))))

$(libintl_MOBJ) $(libintl_MOBJ:.o=.os): $(libintl_MSRC)
	$(compile.m)

libintl-a-$(UCLIBC_HAS_GETTEXT_AWARENESS):=$(libintl_MOBJ)
libintl-a-pic-$(UCLIBC_HAS_GETTEXT_AWARENESS):=$(libintl_MOBJ:.o=.os)
libintl-so-$(UCLIBC_HAS_GETTEXT_AWARENESS):=$(libintl_MOBJ:.o=.os)

CFLAGS-multi-$(UCLIBC_HAS_GETTEXT_AWARENESS):=$(libintl_DEF)
libintl-multi-$(UCLIBC_HAS_GETTEXT_AWARENESS):=$(libintl_MSRC)

objclean-y+=libintl_clean

lib-a-$(UCLIBC_HAS_GETTEXT_AWARENESS)+=$(top_builddir)lib/libintl.a
lib-a-pic-$(UCLIBC_HAS_GETTEXT_AWARENESS)+=$(top_builddir)lib/libintl.a
lib-so-$(UCLIBC_HAS_GETTEXT_AWARENESS)+=$(top_builddir)lib/libintl.so
