# Makefile for uClibc
#
# Copyright (C) 2003 Paul Mundt <lethal@linux-sh.org>
# Copyright (C) 2000-2005 Erik Andersen <andersen@uclibc.org>
#
# Licensed under the LGPL v2.1, see the file COPYING.LIB in this tarball.
#

# We need to build as SHcompact for tas..
ARCH_CFLAGS:=$(subst 32media,compact,$(ARCH_CFLAGS))

libpthread_ARCH_DIR:=$(top_srcdir)libpthread/linuxthreads/sysdeps/sh64
libpthread_ARCH_OUT:=$(top_builddir)libpthread/linuxthreads/sysdeps/sh64

libpthread_ARCH_SRC:=$(wildcard $(libpthread_ARCH_DIR)/*.c)
libpthread_ARCH_OBJ:=$(patsubst $(libpthread_ARCH_DIR)/%.c,$(libpthread_ARCH_OUT)/%.o,$(libpthread_ARCH_SRC))

libpthread-a-$(UCLIBC_HAS_THREADS)+=$(libpthread_ARCH_OBJ)
libpthread-a-pic-$(UCLIBC_HAS_THREADS)+=$(libpthread_ARCH_OBJ:.o=.os)
libpthread-so-$(UCLIBC_HAS_THREADS)+=$(libpthread_ARCH_OBJ:.o=.os)

libpthread-multi-$(UCLIBC_HAS_THREADS)+=$(libpthread_ARCH_SRC)

objclean-y+=libpthread_arch_objclean

libpthread_arch_objclean:
	$(RM) $(libpthread_ARCH_OUT)/*.{o,os}
