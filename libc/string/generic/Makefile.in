# Makefile for uClibc
#
# Copyright (C) 2000-2005 Erik Andersen <andersen@uclibc.org>
#
# Licensed under the LGPL v2.1, see the file COPYING.LIB in this tarball.
#

STRING_GENERIC_DIR:=$(top_srcdir)libc/string/generic
STRING_GENERIC_OUT:=$(top_builddir)libc/string/generic

STRING_GENERIC_SRC:=$(wildcard $(STRING_GENERIC_DIR)/*.c)
MOBJ:=$(patsubst $(STRING_GENERIC_DIR)/%.c,%.o,$(STRING_GENERIC_SRC))

ifeq ($(UCLIBC_HAS_STRING_ARCH_OPT),y)
ifneq ($(strip $(STRING_ARCH_OBJS)),)
MOBJ:=$(filter-out $(notdir $(STRING_ARCH_OBJS)),$(MOBJ))
endif
endif

STRING_GENERIC_OBJ:=$(patsubst %.o,$(STRING_GENERIC_OUT)/%.o,$(MOBJ))

STRING_GENERIC_OBJS:=$(STRING_GENERIC_OBJ)

libc-a-$(UCLIBC_HAS_STRING_GENERIC_OPT)+=$(STRING_GENERIC_OBJS)
libc-a-pic-$(UCLIBC_HAS_STRING_GENERIC_OPT)+=$(STRING_GENERIC_OBJS:.o=.os)
libc-so-$(UCLIBC_HAS_STRING_GENERIC_OPT)+=$(STRING_GENERIC_OBJS:.o=.os)

#libc-multi-$(UCLIBC_HAS_STRING_GENERIC_OPT)+=$(STRING_GENERIC_SRC)
libc-nomulti-$(UCLIBC_HAS_STRING_GENERIC_OPT)+=$(STRING_GENERIC_OBJS)

objclean-y+=string_generic_objclean

string_generic_objclean:
	$(RM) $(STRING_GENERIC_OUT)/*.{o,os}
